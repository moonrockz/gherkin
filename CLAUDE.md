# Claude Code Project Instructions

## Commit Messages

All commits MUST use **Conventional Commits** format:

```
type(scope): description
```

Types: `feat`, `fix`, `docs`, `refactor`, `perf`, `test`, `build`, `ci`, `chore`, `style`

Breaking changes: add `!` after type (e.g., `feat(parser)!: change return type`)

See `AGENTS.md` > Conventional Commits for the full specification.

## Build & Test

Use **`mise run`** for all operations -- not raw `moon`, `uv`, or `wasm-tools` commands:

```bash
mise run test:unit        # MoonBit unit tests
mise run test:bdd         # CLI BDD tests
mise run test:wasm        # WASM component tests
mise run test:all         # All tests
mise run build:native     # Native binary
mise run build:component  # WASM component
```

Run `mise tasks` to see all available tasks.

## Mise Tasks

Tasks are **file-based scripts** in `mise-tasks/`. Never add inline `[tasks]` to `.mise.toml`.

To add a new task: create an executable script in `mise-tasks/` with `#MISE` metadata.

GitHub workflows must call `mise run <task>` instead of inline shell blocks.

## Versioning & Changelog

- **CHANGELOG.md** is auto-generated by `git cliff` from conventional commits -- never edit it manually
- `mise run release:version` computes the next version from commit history
- `mise run release:bump` updates `moon.mod.json` version to match
- `mise run release:changelog` regenerates the full changelog
