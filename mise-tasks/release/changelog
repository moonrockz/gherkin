#!/usr/bin/env bash
#MISE description="Generate CHANGELOG.md from conventional commits"
set -euo pipefail

# Use version from moon.mod.json as the tag (allows manual version override).
VERSION=$(python3 -c "import json; print(json.load(open('moon.mod.json'))['version'])")
git cliff --tag "v${VERSION}" -o CHANGELOG.md
echo "CHANGELOG.md updated (v${VERSION})."
