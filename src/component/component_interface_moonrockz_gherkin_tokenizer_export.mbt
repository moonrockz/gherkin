// Generated by `wit-bindgen` 0.52.0. DO NOT EDIT!

pub fn wasmExportTokenize(p0 : Int, p1 : Int, p2 : Int, p3 : Int, p4 : Int) -> Int {

      let lifted : String? = match p0 {
            0 => Option::None
            1 => {

                  let result = mbt_ffi_ptr2str(p1, p2)

                  Option::Some(result)
            }
            _ => panic()
      }

      let result0 = mbt_ffi_ptr2str(p3, p4)

      let (result1) : (Result[Array[@types.Token], Array[@types.ParseError]]) = @tokenizer.tokenize(@types.Source::{uri : lifted, data : result0});

      match result1 {
            Ok(payload) => {
                  mbt_ffi_store8((return_area) + 0, (0))

                  let address66 = mbt_ffi_malloc((payload).length() * 36);
                  for index67 = 0; index67 < (payload).length(); index67 = index67 + 1 {
                        let iter_elem : @types.Token = (payload)[(index67)]
                        let iter_base = address66 + (index67 * 36);

                        match iter_elem {
                              FeatureLine(payload2) => {
                                    mbt_ffi_store8((iter_base) + 0, (0))
                                    mbt_ffi_store32((iter_base) + 4, ((payload2).location).line)

                                    match (((payload2).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload4) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload4)

                                                ()
                                          }
                                    }

                                    let ptr = mbt_ffi_str2ptr((payload2).keyword)
                                    mbt_ffi_store32((iter_base) + 20, (payload2).keyword.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr)

                                    let ptr5 = mbt_ffi_str2ptr((payload2).name)
                                    mbt_ffi_store32((iter_base) + 28, (payload2).name.length())
                                    mbt_ffi_store32((iter_base) + 24, ptr5)

                                    ()
                              }
                              RuleLine(payload6) => {
                                    mbt_ffi_store8((iter_base) + 0, (1))
                                    mbt_ffi_store32((iter_base) + 4, ((payload6).location).line)

                                    match (((payload6).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload8) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload8)

                                                ()
                                          }
                                    }

                                    let ptr9 = mbt_ffi_str2ptr((payload6).keyword)
                                    mbt_ffi_store32((iter_base) + 20, (payload6).keyword.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr9)

                                    let ptr10 = mbt_ffi_str2ptr((payload6).name)
                                    mbt_ffi_store32((iter_base) + 28, (payload6).name.length())
                                    mbt_ffi_store32((iter_base) + 24, ptr10)

                                    ()
                              }
                              BackgroundLine(payload11) => {
                                    mbt_ffi_store8((iter_base) + 0, (2))
                                    mbt_ffi_store32((iter_base) + 4, ((payload11).location).line)

                                    match (((payload11).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload13) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload13)

                                                ()
                                          }
                                    }

                                    let ptr14 = mbt_ffi_str2ptr((payload11).keyword)
                                    mbt_ffi_store32((iter_base) + 20, (payload11).keyword.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr14)

                                    let ptr15 = mbt_ffi_str2ptr((payload11).name)
                                    mbt_ffi_store32((iter_base) + 28, (payload11).name.length())
                                    mbt_ffi_store32((iter_base) + 24, ptr15)

                                    ()
                              }
                              ScenarioLine(payload16) => {
                                    mbt_ffi_store8((iter_base) + 0, (3))
                                    mbt_ffi_store32((iter_base) + 4, ((payload16).location).line)

                                    match (((payload16).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload18) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload18)

                                                ()
                                          }
                                    }

                                    let ptr19 = mbt_ffi_str2ptr((payload16).keyword)
                                    mbt_ffi_store32((iter_base) + 20, (payload16).keyword.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr19)

                                    let ptr20 = mbt_ffi_str2ptr((payload16).name)
                                    mbt_ffi_store32((iter_base) + 28, (payload16).name.length())
                                    mbt_ffi_store32((iter_base) + 24, ptr20)
                                    mbt_ffi_store8((iter_base) + 32, (payload16).kind.ordinal())

                                    ()
                              }
                              ExamplesLine(payload21) => {
                                    mbt_ffi_store8((iter_base) + 0, (4))
                                    mbt_ffi_store32((iter_base) + 4, ((payload21).location).line)

                                    match (((payload21).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload23) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload23)

                                                ()
                                          }
                                    }

                                    let ptr24 = mbt_ffi_str2ptr((payload21).keyword)
                                    mbt_ffi_store32((iter_base) + 20, (payload21).keyword.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr24)

                                    let ptr25 = mbt_ffi_str2ptr((payload21).name)
                                    mbt_ffi_store32((iter_base) + 28, (payload21).name.length())
                                    mbt_ffi_store32((iter_base) + 24, ptr25)

                                    ()
                              }
                              StepLine(payload26) => {
                                    mbt_ffi_store8((iter_base) + 0, (5))
                                    mbt_ffi_store32((iter_base) + 4, ((payload26).location).line)

                                    match (((payload26).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload28) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload28)

                                                ()
                                          }
                                    }

                                    let ptr29 = mbt_ffi_str2ptr((payload26).keyword)
                                    mbt_ffi_store32((iter_base) + 20, (payload26).keyword.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr29)
                                    mbt_ffi_store8((iter_base) + 24, (payload26).keyword_type.ordinal())

                                    let ptr30 = mbt_ffi_str2ptr((payload26).text)
                                    mbt_ffi_store32((iter_base) + 32, (payload26).text.length())
                                    mbt_ffi_store32((iter_base) + 28, ptr30)

                                    ()
                              }
                              DocStringSeparator(payload31) => {
                                    mbt_ffi_store8((iter_base) + 0, (6))
                                    mbt_ffi_store32((iter_base) + 4, ((payload31).location).line)

                                    match (((payload31).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload33) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload33)

                                                ()
                                          }
                                    }

                                    let ptr34 = mbt_ffi_str2ptr((payload31).delimiter)
                                    mbt_ffi_store32((iter_base) + 20, (payload31).delimiter.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr34)

                                    match ((payload31).media_type) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 24, (0))

                                                ()
                                          }
                                          Some(payload36) => {
                                                mbt_ffi_store8((iter_base) + 24, (1))

                                                let ptr37 = mbt_ffi_str2ptr(payload36)
                                                mbt_ffi_store32((iter_base) + 32, payload36.length())
                                                mbt_ffi_store32((iter_base) + 28, ptr37)

                                                ()
                                          }
                                    }

                                    ()
                              }
                              TokenTableRow(payload38) => {
                                    mbt_ffi_store8((iter_base) + 0, (7))
                                    mbt_ffi_store32((iter_base) + 4, ((payload38).location).line)

                                    match (((payload38).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload40) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload40)

                                                ()
                                          }
                                    }

                                    let address = mbt_ffi_malloc(((payload38).cells).length() * 8);
                                    for index = 0; index < ((payload38).cells).length(); index = index + 1 {
                                          let iter_elem : String = ((payload38).cells)[(index)]
                                          let iter_base = address + (index * 8);

                                          let ptr41 = mbt_ffi_str2ptr(iter_elem)
                                          mbt_ffi_store32((iter_base) + 4, iter_elem.length())
                                          mbt_ffi_store32((iter_base) + 0, ptr41)

                                    }
                                    mbt_ffi_store32((iter_base) + 20, ((payload38).cells).length())
                                    mbt_ffi_store32((iter_base) + 16, address)

                                    ()
                              }
                              TagLine(payload42) => {
                                    mbt_ffi_store8((iter_base) + 0, (8))
                                    mbt_ffi_store32((iter_base) + 4, ((payload42).location).line)

                                    match (((payload42).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload44) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload44)

                                                ()
                                          }
                                    }

                                    let address46 = mbt_ffi_malloc(((payload42).tags).length() * 8);
                                    for index47 = 0; index47 < ((payload42).tags).length(); index47 = index47 + 1 {
                                          let iter_elem : String = ((payload42).tags)[(index47)]
                                          let iter_base = address46 + (index47 * 8);

                                          let ptr45 = mbt_ffi_str2ptr(iter_elem)
                                          mbt_ffi_store32((iter_base) + 4, iter_elem.length())
                                          mbt_ffi_store32((iter_base) + 0, ptr45)

                                    }
                                    mbt_ffi_store32((iter_base) + 20, ((payload42).tags).length())
                                    mbt_ffi_store32((iter_base) + 16, address46)

                                    ()
                              }
                              CommentLine(payload48) => {
                                    mbt_ffi_store8((iter_base) + 0, (9))
                                    mbt_ffi_store32((iter_base) + 4, ((payload48).location).line)

                                    match (((payload48).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload50) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload50)

                                                ()
                                          }
                                    }

                                    let ptr51 = mbt_ffi_str2ptr((payload48).text)
                                    mbt_ffi_store32((iter_base) + 20, (payload48).text.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr51)

                                    ()
                              }
                              Language(payload52) => {
                                    mbt_ffi_store8((iter_base) + 0, (10))
                                    mbt_ffi_store32((iter_base) + 4, ((payload52).location).line)

                                    match (((payload52).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload54) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload54)

                                                ()
                                          }
                                    }

                                    let ptr55 = mbt_ffi_str2ptr((payload52).language)
                                    mbt_ffi_store32((iter_base) + 20, (payload52).language.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr55)

                                    ()
                              }
                              Empty(payload56) => {
                                    mbt_ffi_store8((iter_base) + 0, (11))
                                    mbt_ffi_store32((iter_base) + 4, (payload56).line)

                                    match ((payload56).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload58) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload58)

                                                ()
                                          }
                                    }

                                    ()
                              }
                              Other(payload59) => {
                                    mbt_ffi_store8((iter_base) + 0, (12))
                                    mbt_ffi_store32((iter_base) + 4, ((payload59).location).line)

                                    match (((payload59).location).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload61) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload61)

                                                ()
                                          }
                                    }

                                    let ptr62 = mbt_ffi_str2ptr((payload59).text)
                                    mbt_ffi_store32((iter_base) + 20, (payload59).text.length())
                                    mbt_ffi_store32((iter_base) + 16, ptr62)

                                    ()
                              }
                              Eof(payload63) => {
                                    mbt_ffi_store8((iter_base) + 0, (13))
                                    mbt_ffi_store32((iter_base) + 4, (payload63).line)

                                    match ((payload63).column) {
                                          None => {
                                                mbt_ffi_store8((iter_base) + 8, (0))

                                                ()
                                          }
                                          Some(payload65) => {
                                                mbt_ffi_store8((iter_base) + 8, (1))
                                                mbt_ffi_store32((iter_base) + 12, payload65)

                                                ()
                                          }
                                    }

                                    ()
                              }
                        }

                  }
                  mbt_ffi_store32((return_area) + 8, (payload).length())
                  mbt_ffi_store32((return_area) + 4, address66)

                  ()
            }
            Err(payload68) => {
                  mbt_ffi_store8((return_area) + 0, (1))

                  let address72 = mbt_ffi_malloc((payload68).length() * 20);
                  for index73 = 0; index73 < (payload68).length(); index73 = index73 + 1 {
                        let iter_elem : @types.ParseError = (payload68)[(index73)]
                        let iter_base = address72 + (index73 * 20);

                        let ptr69 = mbt_ffi_str2ptr((iter_elem).message)
                        mbt_ffi_store32((iter_base) + 4, (iter_elem).message.length())
                        mbt_ffi_store32((iter_base) + 0, ptr69)
                        mbt_ffi_store32((iter_base) + 8, (iter_elem).line)

                        match ((iter_elem).column) {
                              None => {
                                    mbt_ffi_store8((iter_base) + 12, (0))

                                    ()
                              }
                              Some(payload71) => {
                                    mbt_ffi_store8((iter_base) + 12, (1))
                                    mbt_ffi_store32((iter_base) + 16, payload71)

                                    ()
                              }
                        }

                  }
                  mbt_ffi_store32((return_area) + 8, (payload68).length())
                  mbt_ffi_store32((return_area) + 4, address72)

                  ()
            }
      }
      return return_area

}

pub fn wasmExportTokenizePostReturn(p0 : Int) -> Unit {

      match (mbt_ffi_load8_u((p0) + 0)) {
            0 => {

                  for index1 = 0; index1 < (mbt_ffi_load32((p0) + 8)); index1 = index1 + 1 {
                        let iter_base = (mbt_ffi_load32((p0) + 4)) + (index1 * 36)

                        match (mbt_ffi_load8_u((iter_base) + 0)) {
                              0 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 24))

                              }
                              1 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 24))

                              }
                              2 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 24))

                              }
                              3 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 24))

                              }
                              4 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 24))

                              }
                              5 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 28))

                              }
                              6 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))

                                    match (mbt_ffi_load8_u((iter_base) + 24)) {
                                          0 => ()
                                          1 => {
                                                mbt_ffi_free(mbt_ffi_load32((iter_base) + 28))

                                          }
                                          _ => panic()
                                    }

                              }
                              7 => {

                                    for index = 0; index < (mbt_ffi_load32((iter_base) + 20)); index = index + 1 {
                                          let iter_base = (mbt_ffi_load32((iter_base) + 16)) + (index * 8)
                                          mbt_ffi_free(mbt_ffi_load32((iter_base) + 0))

                                    }
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))

                              }
                              8 => {

                                    for index0 = 0; index0 < (mbt_ffi_load32((iter_base) + 20)); index0 = index0 + 1 {
                                          let iter_base = (mbt_ffi_load32((iter_base) + 16)) + (index0 * 8)
                                          mbt_ffi_free(mbt_ffi_load32((iter_base) + 0))

                                    }
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))

                              }
                              9 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))

                              }
                              10 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))

                              }
                              11 => ()
                              12 => {
                                    mbt_ffi_free(mbt_ffi_load32((iter_base) + 16))

                              }
                              13 => ()
                              _ => panic()
                        }

                  }
                  mbt_ffi_free(mbt_ffi_load32((p0) + 4))

            }
            1 => {

                  for index2 = 0; index2 < (mbt_ffi_load32((p0) + 8)); index2 = index2 + 1 {
                        let iter_base = (mbt_ffi_load32((p0) + 4)) + (index2 * 20)
                        mbt_ffi_free(mbt_ffi_load32((iter_base) + 0))

                  }
                  mbt_ffi_free(mbt_ffi_load32((p0) + 4))

            }
            _ => panic()
      }

}

