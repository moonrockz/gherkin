// Generated by `wit-bindgen` 0.52.0. DO NOT EDIT!

///|
pub fn wasmExportWrite(p0 : Int) -> Int {
  let lifted : String? = match mbt_ffi_load8_u(p0 + 0) {
    0 => Option::None
    1 => {
      let result = mbt_ffi_ptr2str(
        mbt_ffi_load32(p0 + 4),
        mbt_ffi_load32(p0 + 8),
      )
      Option::Some(result)
    }
    _ => panic()
  }
  let result0 = mbt_ffi_ptr2str(
    mbt_ffi_load32(p0 + 12),
    mbt_ffi_load32(p0 + 16),
  )
  let lifted197 : @types.Feature? = match mbt_ffi_load8_u(p0 + 20) {
    0 => Option::None
    1 => {
      let lifted1 : Int? = match mbt_ffi_load8_u(p0 + 28) {
        0 => Option::None
        1 => Option::Some(mbt_ffi_load32(p0 + 32))
        _ => panic()
      }
      let array : Array[@types.Tag] = []
      for index = 0; index < mbt_ffi_load32(p0 + 40); index = index + 1 {
        let iter_base = mbt_ffi_load32(p0 + 36) + index * 28
        let lifted2 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 8))
          _ => panic()
        }
        let result3 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 12),
          mbt_ffi_load32(iter_base + 16),
        )
        let result4 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 20),
          mbt_ffi_load32(iter_base + 24),
        )
        array.push(@types.Tag::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 0),
            column: lifted2,
          },
          name: result3,
          id: result4,
        })
      }
      mbt_ffi_free(mbt_ffi_load32(p0 + 36))
      let result5 = mbt_ffi_ptr2str(
        mbt_ffi_load32(p0 + 44),
        mbt_ffi_load32(p0 + 48),
      )
      let result6 = mbt_ffi_ptr2str(
        mbt_ffi_load32(p0 + 52),
        mbt_ffi_load32(p0 + 56),
      )
      let result7 = mbt_ffi_ptr2str(
        mbt_ffi_load32(p0 + 60),
        mbt_ffi_load32(p0 + 64),
      )
      let result8 = mbt_ffi_ptr2str(
        mbt_ffi_load32(p0 + 68),
        mbt_ffi_load32(p0 + 72),
      )
      let array195 : Array[@types.FeatureChild] = []
      for index196 = 0
          index196 < mbt_ffi_load32(p0 + 80)
          index196 = index196 + 1 {
        let iter_base = mbt_ffi_load32(p0 + 76) + index196 * 76
        let lifted194 = match mbt_ffi_load8_u(iter_base + 0) {
          0 => {
            let lifted9 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
              0 => Option::None
              1 => Option::Some(mbt_ffi_load32(iter_base + 12))
              _ => panic()
            }
            let result10 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 16),
              mbt_ffi_load32(iter_base + 20),
            )
            let result11 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 24),
              mbt_ffi_load32(iter_base + 28),
            )
            let result12 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 32),
              mbt_ffi_load32(iter_base + 36),
            )
            let result13 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 40),
              mbt_ffi_load32(iter_base + 44),
            )
            let array34 : Array[@types.Step] = []
            for index35 = 0
                index35 < mbt_ffi_load32(iter_base + 52)
                index35 = index35 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 48) + index35 * 88
              let lifted14 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                0 => Option::None
                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                _ => panic()
              }
              let result15 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 12),
                mbt_ffi_load32(iter_base + 16),
              )
              let result16 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 24),
                mbt_ffi_load32(iter_base + 28),
              )
              let result17 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 32),
                mbt_ffi_load32(iter_base + 36),
              )
              let lifted33 : @types.StepArgument? = match
                mbt_ffi_load8_u(iter_base + 40) {
                0 => Option::None
                1 => {
                  let lifted32 = match mbt_ffi_load8_u(iter_base + 44) {
                    0 => {
                      let lifted18 : Int? = match
                        mbt_ffi_load8_u(iter_base + 52) {
                        0 => Option::None
                        1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                        _ => panic()
                      }
                      let lifted20 : String? = match
                        mbt_ffi_load8_u(iter_base + 60) {
                        0 => Option::None
                        1 => {
                          let result19 = mbt_ffi_ptr2str(
                            mbt_ffi_load32(iter_base + 64),
                            mbt_ffi_load32(iter_base + 68),
                          )
                          Option::Some(result19)
                        }
                        _ => panic()
                      }
                      let result21 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 72),
                        mbt_ffi_load32(iter_base + 76),
                      )
                      let result22 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 80),
                        mbt_ffi_load32(iter_base + 84),
                      )
                      @types.StepArgument::DocString(@types.DocString::{
                        location: @types.Location::{
                          line: mbt_ffi_load32(iter_base + 48),
                          column: lifted18,
                        },
                        media_type: lifted20,
                        content: result21,
                        delimiter: result22,
                      })
                    }
                    1 => {
                      let lifted23 : Int? = match
                        mbt_ffi_load8_u(iter_base + 52) {
                        0 => Option::None
                        1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                        _ => panic()
                      }
                      let array30 : Array[@types.TableRow] = []
                      for index31 = 0
                          index31 < mbt_ffi_load32(iter_base + 64)
                          index31 = index31 + 1 {
                        let iter_base = mbt_ffi_load32(iter_base + 60) +
                          index31 * 28
                        let lifted24 : Int? = match
                          mbt_ffi_load8_u(iter_base + 4) {
                          0 => Option::None
                          1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                          _ => panic()
                        }
                        let result25 = mbt_ffi_ptr2str(
                          mbt_ffi_load32(iter_base + 12),
                          mbt_ffi_load32(iter_base + 16),
                        )
                        let array28 : Array[@types.TableCell] = []
                        for index29 = 0
                            index29 < mbt_ffi_load32(iter_base + 24)
                            index29 = index29 + 1 {
                          let iter_base = mbt_ffi_load32(iter_base + 20) +
                            index29 * 20
                          let lifted26 : Int? = match
                            mbt_ffi_load8_u(iter_base + 4) {
                            0 => Option::None
                            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                            _ => panic()
                          }
                          let result27 = mbt_ffi_ptr2str(
                            mbt_ffi_load32(iter_base + 12),
                            mbt_ffi_load32(iter_base + 16),
                          )
                          array28.push(@types.TableCell::{
                            location: @types.Location::{
                              line: mbt_ffi_load32(iter_base + 0),
                              column: lifted26,
                            },
                            value: result27,
                          })
                        }
                        mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
                        array30.push(@types.TableRow::{
                          location: @types.Location::{
                            line: mbt_ffi_load32(iter_base + 0),
                            column: lifted24,
                          },
                          id: result25,
                          cells: array28,
                        })
                      }
                      mbt_ffi_free(mbt_ffi_load32(iter_base + 60))
                      @types.StepArgument::DataTable(@types.DataTable::{
                        location: @types.Location::{
                          line: mbt_ffi_load32(iter_base + 48),
                          column: lifted23,
                        },
                        rows: array30,
                      })
                    }
                    _ => panic()
                  }
                  Option::Some(lifted32)
                }
                _ => panic()
              }
              array34.push(@types.Step::{
                location: @types.Location::{
                  line: mbt_ffi_load32(iter_base + 0),
                  column: lifted14,
                },
                keyword: result15,
                keyword_type: @types.KeywordType::from(
                  mbt_ffi_load8_u(iter_base + 20),
                ),
                text: result16,
                id: result17,
                argument: lifted33,
              })
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 48))
            @types.FeatureChild::Background(@types.Background::{
              location: @types.Location::{
                line: mbt_ffi_load32(iter_base + 4),
                column: lifted9,
              },
              keyword: result10,
              name: result11,
              description: result12,
              id: result13,
              steps: array34,
            })
          }
          1 => {
            let lifted36 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
              0 => Option::None
              1 => Option::Some(mbt_ffi_load32(iter_base + 12))
              _ => panic()
            }
            let array40 : Array[@types.Tag] = []
            for index41 = 0
                index41 < mbt_ffi_load32(iter_base + 20)
                index41 = index41 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 16) + index41 * 28
              let lifted37 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                0 => Option::None
                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                _ => panic()
              }
              let result38 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 12),
                mbt_ffi_load32(iter_base + 16),
              )
              let result39 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 20),
                mbt_ffi_load32(iter_base + 24),
              )
              array40.push(@types.Tag::{
                location: @types.Location::{
                  line: mbt_ffi_load32(iter_base + 0),
                  column: lifted37,
                },
                name: result38,
                id: result39,
              })
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
            let result42 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 28),
              mbt_ffi_load32(iter_base + 32),
            )
            let result43 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 36),
              mbt_ffi_load32(iter_base + 40),
            )
            let result44 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 44),
              mbt_ffi_load32(iter_base + 48),
            )
            let result45 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 52),
              mbt_ffi_load32(iter_base + 56),
            )
            let array66 : Array[@types.Step] = []
            for index67 = 0
                index67 < mbt_ffi_load32(iter_base + 64)
                index67 = index67 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 60) + index67 * 88
              let lifted46 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                0 => Option::None
                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                _ => panic()
              }
              let result47 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 12),
                mbt_ffi_load32(iter_base + 16),
              )
              let result48 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 24),
                mbt_ffi_load32(iter_base + 28),
              )
              let result49 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 32),
                mbt_ffi_load32(iter_base + 36),
              )
              let lifted65 : @types.StepArgument? = match
                mbt_ffi_load8_u(iter_base + 40) {
                0 => Option::None
                1 => {
                  let lifted64 = match mbt_ffi_load8_u(iter_base + 44) {
                    0 => {
                      let lifted50 : Int? = match
                        mbt_ffi_load8_u(iter_base + 52) {
                        0 => Option::None
                        1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                        _ => panic()
                      }
                      let lifted52 : String? = match
                        mbt_ffi_load8_u(iter_base + 60) {
                        0 => Option::None
                        1 => {
                          let result51 = mbt_ffi_ptr2str(
                            mbt_ffi_load32(iter_base + 64),
                            mbt_ffi_load32(iter_base + 68),
                          )
                          Option::Some(result51)
                        }
                        _ => panic()
                      }
                      let result53 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 72),
                        mbt_ffi_load32(iter_base + 76),
                      )
                      let result54 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 80),
                        mbt_ffi_load32(iter_base + 84),
                      )
                      @types.StepArgument::DocString(@types.DocString::{
                        location: @types.Location::{
                          line: mbt_ffi_load32(iter_base + 48),
                          column: lifted50,
                        },
                        media_type: lifted52,
                        content: result53,
                        delimiter: result54,
                      })
                    }
                    1 => {
                      let lifted55 : Int? = match
                        mbt_ffi_load8_u(iter_base + 52) {
                        0 => Option::None
                        1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                        _ => panic()
                      }
                      let array62 : Array[@types.TableRow] = []
                      for index63 = 0
                          index63 < mbt_ffi_load32(iter_base + 64)
                          index63 = index63 + 1 {
                        let iter_base = mbt_ffi_load32(iter_base + 60) +
                          index63 * 28
                        let lifted56 : Int? = match
                          mbt_ffi_load8_u(iter_base + 4) {
                          0 => Option::None
                          1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                          _ => panic()
                        }
                        let result57 = mbt_ffi_ptr2str(
                          mbt_ffi_load32(iter_base + 12),
                          mbt_ffi_load32(iter_base + 16),
                        )
                        let array60 : Array[@types.TableCell] = []
                        for index61 = 0
                            index61 < mbt_ffi_load32(iter_base + 24)
                            index61 = index61 + 1 {
                          let iter_base = mbt_ffi_load32(iter_base + 20) +
                            index61 * 20
                          let lifted58 : Int? = match
                            mbt_ffi_load8_u(iter_base + 4) {
                            0 => Option::None
                            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                            _ => panic()
                          }
                          let result59 = mbt_ffi_ptr2str(
                            mbt_ffi_load32(iter_base + 12),
                            mbt_ffi_load32(iter_base + 16),
                          )
                          array60.push(@types.TableCell::{
                            location: @types.Location::{
                              line: mbt_ffi_load32(iter_base + 0),
                              column: lifted58,
                            },
                            value: result59,
                          })
                        }
                        mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
                        array62.push(@types.TableRow::{
                          location: @types.Location::{
                            line: mbt_ffi_load32(iter_base + 0),
                            column: lifted56,
                          },
                          id: result57,
                          cells: array60,
                        })
                      }
                      mbt_ffi_free(mbt_ffi_load32(iter_base + 60))
                      @types.StepArgument::DataTable(@types.DataTable::{
                        location: @types.Location::{
                          line: mbt_ffi_load32(iter_base + 48),
                          column: lifted55,
                        },
                        rows: array62,
                      })
                    }
                    _ => panic()
                  }
                  Option::Some(lifted64)
                }
                _ => panic()
              }
              array66.push(@types.Step::{
                location: @types.Location::{
                  line: mbt_ffi_load32(iter_base + 0),
                  column: lifted46,
                },
                keyword: result47,
                keyword_type: @types.KeywordType::from(
                  mbt_ffi_load8_u(iter_base + 20),
                ),
                text: result48,
                id: result49,
                argument: lifted65,
              })
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 60))
            let array93 : Array[@types.Examples] = []
            for index94 = 0
                index94 < mbt_ffi_load32(iter_base + 72)
                index94 = index94 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 68) + index94 * 92
              let lifted68 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                0 => Option::None
                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                _ => panic()
              }
              let array72 : Array[@types.Tag] = []
              for index73 = 0
                  index73 < mbt_ffi_load32(iter_base + 16)
                  index73 = index73 + 1 {
                let iter_base = mbt_ffi_load32(iter_base + 12) + index73 * 28
                let lifted69 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                  0 => Option::None
                  1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                  _ => panic()
                }
                let result70 = mbt_ffi_ptr2str(
                  mbt_ffi_load32(iter_base + 12),
                  mbt_ffi_load32(iter_base + 16),
                )
                let result71 = mbt_ffi_ptr2str(
                  mbt_ffi_load32(iter_base + 20),
                  mbt_ffi_load32(iter_base + 24),
                )
                array72.push(@types.Tag::{
                  location: @types.Location::{
                    line: mbt_ffi_load32(iter_base + 0),
                    column: lifted69,
                  },
                  name: result70,
                  id: result71,
                })
              }
              mbt_ffi_free(mbt_ffi_load32(iter_base + 12))
              let result74 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 20),
                mbt_ffi_load32(iter_base + 24),
              )
              let result75 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 28),
                mbt_ffi_load32(iter_base + 32),
              )
              let result76 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 36),
                mbt_ffi_load32(iter_base + 40),
              )
              let result77 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 44),
                mbt_ffi_load32(iter_base + 48),
              )
              let lifted84 : @types.TableRow? = match
                mbt_ffi_load8_u(iter_base + 52) {
                0 => Option::None
                1 => {
                  let lifted78 : Int? = match mbt_ffi_load8_u(iter_base + 60) {
                    0 => Option::None
                    1 => Option::Some(mbt_ffi_load32(iter_base + 64))
                    _ => panic()
                  }
                  let result79 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 68),
                    mbt_ffi_load32(iter_base + 72),
                  )
                  let array82 : Array[@types.TableCell] = []
                  for index83 = 0
                      index83 < mbt_ffi_load32(iter_base + 80)
                      index83 = index83 + 1 {
                    let iter_base = mbt_ffi_load32(iter_base + 76) +
                      index83 * 20
                    let lifted80 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                      0 => Option::None
                      1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                      _ => panic()
                    }
                    let result81 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 12),
                      mbt_ffi_load32(iter_base + 16),
                    )
                    array82.push(@types.TableCell::{
                      location: @types.Location::{
                        line: mbt_ffi_load32(iter_base + 0),
                        column: lifted80,
                      },
                      value: result81,
                    })
                  }
                  mbt_ffi_free(mbt_ffi_load32(iter_base + 76))
                  Option::Some(@types.TableRow::{
                    location: @types.Location::{
                      line: mbt_ffi_load32(iter_base + 56),
                      column: lifted78,
                    },
                    id: result79,
                    cells: array82,
                  })
                }
                _ => panic()
              }
              let array91 : Array[@types.TableRow] = []
              for index92 = 0
                  index92 < mbt_ffi_load32(iter_base + 88)
                  index92 = index92 + 1 {
                let iter_base = mbt_ffi_load32(iter_base + 84) + index92 * 28
                let lifted85 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                  0 => Option::None
                  1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                  _ => panic()
                }
                let result86 = mbt_ffi_ptr2str(
                  mbt_ffi_load32(iter_base + 12),
                  mbt_ffi_load32(iter_base + 16),
                )
                let array89 : Array[@types.TableCell] = []
                for index90 = 0
                    index90 < mbt_ffi_load32(iter_base + 24)
                    index90 = index90 + 1 {
                  let iter_base = mbt_ffi_load32(iter_base + 20) + index90 * 20
                  let lifted87 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                    0 => Option::None
                    1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                    _ => panic()
                  }
                  let result88 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 12),
                    mbt_ffi_load32(iter_base + 16),
                  )
                  array89.push(@types.TableCell::{
                    location: @types.Location::{
                      line: mbt_ffi_load32(iter_base + 0),
                      column: lifted87,
                    },
                    value: result88,
                  })
                }
                mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
                array91.push(@types.TableRow::{
                  location: @types.Location::{
                    line: mbt_ffi_load32(iter_base + 0),
                    column: lifted85,
                  },
                  id: result86,
                  cells: array89,
                })
              }
              mbt_ffi_free(mbt_ffi_load32(iter_base + 84))
              array93.push(@types.Examples::{
                location: @types.Location::{
                  line: mbt_ffi_load32(iter_base + 0),
                  column: lifted68,
                },
                tags: array72,
                keyword: result74,
                name: result75,
                description: result76,
                id: result77,
                table_header: lifted84,
                table_body: array91,
              })
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 68))
            @types.FeatureChild::Scenario(@types.Scenario::{
              location: @types.Location::{
                line: mbt_ffi_load32(iter_base + 4),
                column: lifted36,
              },
              tags: array40,
              kind: @types.ScenarioKind::from(mbt_ffi_load8_u(iter_base + 24)),
              keyword: result42,
              name: result43,
              description: result44,
              id: result45,
              steps: array66,
              examples: array93,
            })
          }
          2 => {
            let lifted95 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
              0 => Option::None
              1 => Option::Some(mbt_ffi_load32(iter_base + 12))
              _ => panic()
            }
            let array99 : Array[@types.Tag] = []
            for index100 = 0
                index100 < mbt_ffi_load32(iter_base + 20)
                index100 = index100 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 16) + index100 * 28
              let lifted96 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                0 => Option::None
                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                _ => panic()
              }
              let result97 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 12),
                mbt_ffi_load32(iter_base + 16),
              )
              let result98 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 20),
                mbt_ffi_load32(iter_base + 24),
              )
              array99.push(@types.Tag::{
                location: @types.Location::{
                  line: mbt_ffi_load32(iter_base + 0),
                  column: lifted96,
                },
                name: result97,
                id: result98,
              })
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
            let result101 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 24),
              mbt_ffi_load32(iter_base + 28),
            )
            let result102 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 32),
              mbt_ffi_load32(iter_base + 36),
            )
            let result103 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 40),
              mbt_ffi_load32(iter_base + 44),
            )
            let result104 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 48),
              mbt_ffi_load32(iter_base + 52),
            )
            let array192 : Array[@types.RuleChild] = []
            for index193 = 0
                index193 < mbt_ffi_load32(iter_base + 60)
                index193 = index193 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 56) + index193 * 76
              let lifted191 = match mbt_ffi_load8_u(iter_base + 0) {
                0 => {
                  let lifted105 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
                    0 => Option::None
                    1 => Option::Some(mbt_ffi_load32(iter_base + 12))
                    _ => panic()
                  }
                  let result106 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 16),
                    mbt_ffi_load32(iter_base + 20),
                  )
                  let result107 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 24),
                    mbt_ffi_load32(iter_base + 28),
                  )
                  let result108 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 32),
                    mbt_ffi_load32(iter_base + 36),
                  )
                  let result109 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 40),
                    mbt_ffi_load32(iter_base + 44),
                  )
                  let array130 : Array[@types.Step] = []
                  for index131 = 0
                      index131 < mbt_ffi_load32(iter_base + 52)
                      index131 = index131 + 1 {
                    let iter_base = mbt_ffi_load32(iter_base + 48) +
                      index131 * 88
                    let lifted110 : Int? = match
                      mbt_ffi_load8_u(iter_base + 4) {
                      0 => Option::None
                      1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                      _ => panic()
                    }
                    let result111 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 12),
                      mbt_ffi_load32(iter_base + 16),
                    )
                    let result112 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 24),
                      mbt_ffi_load32(iter_base + 28),
                    )
                    let result113 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 32),
                      mbt_ffi_load32(iter_base + 36),
                    )
                    let lifted129 : @types.StepArgument? = match
                      mbt_ffi_load8_u(iter_base + 40) {
                      0 => Option::None
                      1 => {
                        let lifted128 = match mbt_ffi_load8_u(iter_base + 44) {
                          0 => {
                            let lifted114 : Int? = match
                              mbt_ffi_load8_u(iter_base + 52) {
                              0 => Option::None
                              1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                              _ => panic()
                            }
                            let lifted116 : String? = match
                              mbt_ffi_load8_u(iter_base + 60) {
                              0 => Option::None
                              1 => {
                                let result115 = mbt_ffi_ptr2str(
                                  mbt_ffi_load32(iter_base + 64),
                                  mbt_ffi_load32(iter_base + 68),
                                )
                                Option::Some(result115)
                              }
                              _ => panic()
                            }
                            let result117 = mbt_ffi_ptr2str(
                              mbt_ffi_load32(iter_base + 72),
                              mbt_ffi_load32(iter_base + 76),
                            )
                            let result118 = mbt_ffi_ptr2str(
                              mbt_ffi_load32(iter_base + 80),
                              mbt_ffi_load32(iter_base + 84),
                            )
                            @types.StepArgument::DocString(@types.DocString::{
                              location: @types.Location::{
                                line: mbt_ffi_load32(iter_base + 48),
                                column: lifted114,
                              },
                              media_type: lifted116,
                              content: result117,
                              delimiter: result118,
                            })
                          }
                          1 => {
                            let lifted119 : Int? = match
                              mbt_ffi_load8_u(iter_base + 52) {
                              0 => Option::None
                              1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                              _ => panic()
                            }
                            let array126 : Array[@types.TableRow] = []
                            for index127 = 0
                                index127 < mbt_ffi_load32(iter_base + 64)
                                index127 = index127 + 1 {
                              let iter_base = mbt_ffi_load32(iter_base + 60) +
                                index127 * 28
                              let lifted120 : Int? = match
                                mbt_ffi_load8_u(iter_base + 4) {
                                0 => Option::None
                                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                                _ => panic()
                              }
                              let result121 = mbt_ffi_ptr2str(
                                mbt_ffi_load32(iter_base + 12),
                                mbt_ffi_load32(iter_base + 16),
                              )
                              let array124 : Array[@types.TableCell] = []
                              for index125 = 0
                                  index125 < mbt_ffi_load32(iter_base + 24)
                                  index125 = index125 + 1 {
                                let iter_base = mbt_ffi_load32(iter_base + 20) +
                                  index125 * 20
                                let lifted122 : Int? = match
                                  mbt_ffi_load8_u(iter_base + 4) {
                                  0 => Option::None
                                  1 =>
                                    Option::Some(mbt_ffi_load32(iter_base + 8))
                                  _ => panic()
                                }
                                let result123 = mbt_ffi_ptr2str(
                                  mbt_ffi_load32(iter_base + 12),
                                  mbt_ffi_load32(iter_base + 16),
                                )
                                array124.push(@types.TableCell::{
                                  location: @types.Location::{
                                    line: mbt_ffi_load32(iter_base + 0),
                                    column: lifted122,
                                  },
                                  value: result123,
                                })
                              }
                              mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
                              array126.push(@types.TableRow::{
                                location: @types.Location::{
                                  line: mbt_ffi_load32(iter_base + 0),
                                  column: lifted120,
                                },
                                id: result121,
                                cells: array124,
                              })
                            }
                            mbt_ffi_free(mbt_ffi_load32(iter_base + 60))
                            @types.StepArgument::DataTable(@types.DataTable::{
                              location: @types.Location::{
                                line: mbt_ffi_load32(iter_base + 48),
                                column: lifted119,
                              },
                              rows: array126,
                            })
                          }
                          _ => panic()
                        }
                        Option::Some(lifted128)
                      }
                      _ => panic()
                    }
                    array130.push(@types.Step::{
                      location: @types.Location::{
                        line: mbt_ffi_load32(iter_base + 0),
                        column: lifted110,
                      },
                      keyword: result111,
                      keyword_type: @types.KeywordType::from(
                        mbt_ffi_load8_u(iter_base + 20),
                      ),
                      text: result112,
                      id: result113,
                      argument: lifted129,
                    })
                  }
                  mbt_ffi_free(mbt_ffi_load32(iter_base + 48))
                  @types.RuleChild::Background(@types.Background::{
                    location: @types.Location::{
                      line: mbt_ffi_load32(iter_base + 4),
                      column: lifted105,
                    },
                    keyword: result106,
                    name: result107,
                    description: result108,
                    id: result109,
                    steps: array130,
                  })
                }
                1 => {
                  let lifted132 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
                    0 => Option::None
                    1 => Option::Some(mbt_ffi_load32(iter_base + 12))
                    _ => panic()
                  }
                  let array136 : Array[@types.Tag] = []
                  for index137 = 0
                      index137 < mbt_ffi_load32(iter_base + 20)
                      index137 = index137 + 1 {
                    let iter_base = mbt_ffi_load32(iter_base + 16) +
                      index137 * 28
                    let lifted133 : Int? = match
                      mbt_ffi_load8_u(iter_base + 4) {
                      0 => Option::None
                      1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                      _ => panic()
                    }
                    let result134 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 12),
                      mbt_ffi_load32(iter_base + 16),
                    )
                    let result135 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 20),
                      mbt_ffi_load32(iter_base + 24),
                    )
                    array136.push(@types.Tag::{
                      location: @types.Location::{
                        line: mbt_ffi_load32(iter_base + 0),
                        column: lifted133,
                      },
                      name: result134,
                      id: result135,
                    })
                  }
                  mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
                  let result138 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 28),
                    mbt_ffi_load32(iter_base + 32),
                  )
                  let result139 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 36),
                    mbt_ffi_load32(iter_base + 40),
                  )
                  let result140 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 44),
                    mbt_ffi_load32(iter_base + 48),
                  )
                  let result141 = mbt_ffi_ptr2str(
                    mbt_ffi_load32(iter_base + 52),
                    mbt_ffi_load32(iter_base + 56),
                  )
                  let array162 : Array[@types.Step] = []
                  for index163 = 0
                      index163 < mbt_ffi_load32(iter_base + 64)
                      index163 = index163 + 1 {
                    let iter_base = mbt_ffi_load32(iter_base + 60) +
                      index163 * 88
                    let lifted142 : Int? = match
                      mbt_ffi_load8_u(iter_base + 4) {
                      0 => Option::None
                      1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                      _ => panic()
                    }
                    let result143 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 12),
                      mbt_ffi_load32(iter_base + 16),
                    )
                    let result144 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 24),
                      mbt_ffi_load32(iter_base + 28),
                    )
                    let result145 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 32),
                      mbt_ffi_load32(iter_base + 36),
                    )
                    let lifted161 : @types.StepArgument? = match
                      mbt_ffi_load8_u(iter_base + 40) {
                      0 => Option::None
                      1 => {
                        let lifted160 = match mbt_ffi_load8_u(iter_base + 44) {
                          0 => {
                            let lifted146 : Int? = match
                              mbt_ffi_load8_u(iter_base + 52) {
                              0 => Option::None
                              1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                              _ => panic()
                            }
                            let lifted148 : String? = match
                              mbt_ffi_load8_u(iter_base + 60) {
                              0 => Option::None
                              1 => {
                                let result147 = mbt_ffi_ptr2str(
                                  mbt_ffi_load32(iter_base + 64),
                                  mbt_ffi_load32(iter_base + 68),
                                )
                                Option::Some(result147)
                              }
                              _ => panic()
                            }
                            let result149 = mbt_ffi_ptr2str(
                              mbt_ffi_load32(iter_base + 72),
                              mbt_ffi_load32(iter_base + 76),
                            )
                            let result150 = mbt_ffi_ptr2str(
                              mbt_ffi_load32(iter_base + 80),
                              mbt_ffi_load32(iter_base + 84),
                            )
                            @types.StepArgument::DocString(@types.DocString::{
                              location: @types.Location::{
                                line: mbt_ffi_load32(iter_base + 48),
                                column: lifted146,
                              },
                              media_type: lifted148,
                              content: result149,
                              delimiter: result150,
                            })
                          }
                          1 => {
                            let lifted151 : Int? = match
                              mbt_ffi_load8_u(iter_base + 52) {
                              0 => Option::None
                              1 => Option::Some(mbt_ffi_load32(iter_base + 56))
                              _ => panic()
                            }
                            let array158 : Array[@types.TableRow] = []
                            for index159 = 0
                                index159 < mbt_ffi_load32(iter_base + 64)
                                index159 = index159 + 1 {
                              let iter_base = mbt_ffi_load32(iter_base + 60) +
                                index159 * 28
                              let lifted152 : Int? = match
                                mbt_ffi_load8_u(iter_base + 4) {
                                0 => Option::None
                                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                                _ => panic()
                              }
                              let result153 = mbt_ffi_ptr2str(
                                mbt_ffi_load32(iter_base + 12),
                                mbt_ffi_load32(iter_base + 16),
                              )
                              let array156 : Array[@types.TableCell] = []
                              for index157 = 0
                                  index157 < mbt_ffi_load32(iter_base + 24)
                                  index157 = index157 + 1 {
                                let iter_base = mbt_ffi_load32(iter_base + 20) +
                                  index157 * 20
                                let lifted154 : Int? = match
                                  mbt_ffi_load8_u(iter_base + 4) {
                                  0 => Option::None
                                  1 =>
                                    Option::Some(mbt_ffi_load32(iter_base + 8))
                                  _ => panic()
                                }
                                let result155 = mbt_ffi_ptr2str(
                                  mbt_ffi_load32(iter_base + 12),
                                  mbt_ffi_load32(iter_base + 16),
                                )
                                array156.push(@types.TableCell::{
                                  location: @types.Location::{
                                    line: mbt_ffi_load32(iter_base + 0),
                                    column: lifted154,
                                  },
                                  value: result155,
                                })
                              }
                              mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
                              array158.push(@types.TableRow::{
                                location: @types.Location::{
                                  line: mbt_ffi_load32(iter_base + 0),
                                  column: lifted152,
                                },
                                id: result153,
                                cells: array156,
                              })
                            }
                            mbt_ffi_free(mbt_ffi_load32(iter_base + 60))
                            @types.StepArgument::DataTable(@types.DataTable::{
                              location: @types.Location::{
                                line: mbt_ffi_load32(iter_base + 48),
                                column: lifted151,
                              },
                              rows: array158,
                            })
                          }
                          _ => panic()
                        }
                        Option::Some(lifted160)
                      }
                      _ => panic()
                    }
                    array162.push(@types.Step::{
                      location: @types.Location::{
                        line: mbt_ffi_load32(iter_base + 0),
                        column: lifted142,
                      },
                      keyword: result143,
                      keyword_type: @types.KeywordType::from(
                        mbt_ffi_load8_u(iter_base + 20),
                      ),
                      text: result144,
                      id: result145,
                      argument: lifted161,
                    })
                  }
                  mbt_ffi_free(mbt_ffi_load32(iter_base + 60))
                  let array189 : Array[@types.Examples] = []
                  for index190 = 0
                      index190 < mbt_ffi_load32(iter_base + 72)
                      index190 = index190 + 1 {
                    let iter_base = mbt_ffi_load32(iter_base + 68) +
                      index190 * 92
                    let lifted164 : Int? = match
                      mbt_ffi_load8_u(iter_base + 4) {
                      0 => Option::None
                      1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                      _ => panic()
                    }
                    let array168 : Array[@types.Tag] = []
                    for index169 = 0
                        index169 < mbt_ffi_load32(iter_base + 16)
                        index169 = index169 + 1 {
                      let iter_base = mbt_ffi_load32(iter_base + 12) +
                        index169 * 28
                      let lifted165 : Int? = match
                        mbt_ffi_load8_u(iter_base + 4) {
                        0 => Option::None
                        1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                        _ => panic()
                      }
                      let result166 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 12),
                        mbt_ffi_load32(iter_base + 16),
                      )
                      let result167 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 20),
                        mbt_ffi_load32(iter_base + 24),
                      )
                      array168.push(@types.Tag::{
                        location: @types.Location::{
                          line: mbt_ffi_load32(iter_base + 0),
                          column: lifted165,
                        },
                        name: result166,
                        id: result167,
                      })
                    }
                    mbt_ffi_free(mbt_ffi_load32(iter_base + 12))
                    let result170 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 20),
                      mbt_ffi_load32(iter_base + 24),
                    )
                    let result171 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 28),
                      mbt_ffi_load32(iter_base + 32),
                    )
                    let result172 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 36),
                      mbt_ffi_load32(iter_base + 40),
                    )
                    let result173 = mbt_ffi_ptr2str(
                      mbt_ffi_load32(iter_base + 44),
                      mbt_ffi_load32(iter_base + 48),
                    )
                    let lifted180 : @types.TableRow? = match
                      mbt_ffi_load8_u(iter_base + 52) {
                      0 => Option::None
                      1 => {
                        let lifted174 : Int? = match
                          mbt_ffi_load8_u(iter_base + 60) {
                          0 => Option::None
                          1 => Option::Some(mbt_ffi_load32(iter_base + 64))
                          _ => panic()
                        }
                        let result175 = mbt_ffi_ptr2str(
                          mbt_ffi_load32(iter_base + 68),
                          mbt_ffi_load32(iter_base + 72),
                        )
                        let array178 : Array[@types.TableCell] = []
                        for index179 = 0
                            index179 < mbt_ffi_load32(iter_base + 80)
                            index179 = index179 + 1 {
                          let iter_base = mbt_ffi_load32(iter_base + 76) +
                            index179 * 20
                          let lifted176 : Int? = match
                            mbt_ffi_load8_u(iter_base + 4) {
                            0 => Option::None
                            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                            _ => panic()
                          }
                          let result177 = mbt_ffi_ptr2str(
                            mbt_ffi_load32(iter_base + 12),
                            mbt_ffi_load32(iter_base + 16),
                          )
                          array178.push(@types.TableCell::{
                            location: @types.Location::{
                              line: mbt_ffi_load32(iter_base + 0),
                              column: lifted176,
                            },
                            value: result177,
                          })
                        }
                        mbt_ffi_free(mbt_ffi_load32(iter_base + 76))
                        Option::Some(@types.TableRow::{
                          location: @types.Location::{
                            line: mbt_ffi_load32(iter_base + 56),
                            column: lifted174,
                          },
                          id: result175,
                          cells: array178,
                        })
                      }
                      _ => panic()
                    }
                    let array187 : Array[@types.TableRow] = []
                    for index188 = 0
                        index188 < mbt_ffi_load32(iter_base + 88)
                        index188 = index188 + 1 {
                      let iter_base = mbt_ffi_load32(iter_base + 84) +
                        index188 * 28
                      let lifted181 : Int? = match
                        mbt_ffi_load8_u(iter_base + 4) {
                        0 => Option::None
                        1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                        _ => panic()
                      }
                      let result182 = mbt_ffi_ptr2str(
                        mbt_ffi_load32(iter_base + 12),
                        mbt_ffi_load32(iter_base + 16),
                      )
                      let array185 : Array[@types.TableCell] = []
                      for index186 = 0
                          index186 < mbt_ffi_load32(iter_base + 24)
                          index186 = index186 + 1 {
                        let iter_base = mbt_ffi_load32(iter_base + 20) +
                          index186 * 20
                        let lifted183 : Int? = match
                          mbt_ffi_load8_u(iter_base + 4) {
                          0 => Option::None
                          1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                          _ => panic()
                        }
                        let result184 = mbt_ffi_ptr2str(
                          mbt_ffi_load32(iter_base + 12),
                          mbt_ffi_load32(iter_base + 16),
                        )
                        array185.push(@types.TableCell::{
                          location: @types.Location::{
                            line: mbt_ffi_load32(iter_base + 0),
                            column: lifted183,
                          },
                          value: result184,
                        })
                      }
                      mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
                      array187.push(@types.TableRow::{
                        location: @types.Location::{
                          line: mbt_ffi_load32(iter_base + 0),
                          column: lifted181,
                        },
                        id: result182,
                        cells: array185,
                      })
                    }
                    mbt_ffi_free(mbt_ffi_load32(iter_base + 84))
                    array189.push(@types.Examples::{
                      location: @types.Location::{
                        line: mbt_ffi_load32(iter_base + 0),
                        column: lifted164,
                      },
                      tags: array168,
                      keyword: result170,
                      name: result171,
                      description: result172,
                      id: result173,
                      table_header: lifted180,
                      table_body: array187,
                    })
                  }
                  mbt_ffi_free(mbt_ffi_load32(iter_base + 68))
                  @types.RuleChild::Scenario(@types.Scenario::{
                    location: @types.Location::{
                      line: mbt_ffi_load32(iter_base + 4),
                      column: lifted132,
                    },
                    tags: array136,
                    kind: @types.ScenarioKind::from(
                      mbt_ffi_load8_u(iter_base + 24),
                    ),
                    keyword: result138,
                    name: result139,
                    description: result140,
                    id: result141,
                    steps: array162,
                    examples: array189,
                  })
                }
                _ => panic()
              }
              array192.push(lifted191)
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 56))
            @types.FeatureChild::Rule(@types.Rule::{
              location: @types.Location::{
                line: mbt_ffi_load32(iter_base + 4),
                column: lifted95,
              },
              tags: array99,
              keyword: result101,
              name: result102,
              description: result103,
              id: result104,
              children: array192,
            })
          }
          _ => panic()
        }
        array195.push(lifted194)
      }
      mbt_ffi_free(mbt_ffi_load32(p0 + 76))
      Option::Some(@types.Feature::{
        location: @types.Location::{
          line: mbt_ffi_load32(p0 + 24),
          column: lifted1,
        },
        tags: array,
        language: result5,
        keyword: result6,
        name: result7,
        description: result8,
        children: array195,
      })
    }
    _ => panic()
  }
  let array200 : Array[@types.Comment] = []
  for index201 = 0; index201 < mbt_ffi_load32(p0 + 88); index201 = index201 + 1 {
    let iter_base = mbt_ffi_load32(p0 + 84) + index201 * 20
    let lifted198 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
      0 => Option::None
      1 => Option::Some(mbt_ffi_load32(iter_base + 8))
      _ => panic()
    }
    let result199 = mbt_ffi_ptr2str(
      mbt_ffi_load32(iter_base + 12),
      mbt_ffi_load32(iter_base + 16),
    )
    array200.push(@types.Comment::{
      location: @types.Location::{
        line: mbt_ffi_load32(iter_base + 0),
        column: lifted198,
      },
      text: result199,
    })
  }
  mbt_ffi_free(mbt_ffi_load32(p0 + 84))
  let result202 : Result[String, String] = @writer.write(@types.GherkinDocument::{
    source: @types.Source::{ uri: lifted, data: result0 },
    feature: lifted197,
    comments: array200,
  })
  mbt_ffi_free(p0)
  match result202 {
    Ok(payload) => {
      mbt_ffi_store8(return_area + 0, 0)
      let ptr = mbt_ffi_str2ptr(payload)
      mbt_ffi_store32(return_area + 8, payload.length())
      mbt_ffi_store32(return_area + 4, ptr)
      ()
    }
    Err(payload203) => {
      mbt_ffi_store8(return_area + 0, 1)
      let ptr204 = mbt_ffi_str2ptr(payload203)
      mbt_ffi_store32(return_area + 8, payload203.length())
      mbt_ffi_store32(return_area + 4, ptr204)
      ()
    }
  }
  return return_area
}

///|
pub fn wasmExportWritePostReturn(p0 : Int) -> Unit {
  match mbt_ffi_load8_u(p0 + 0) {
    0 => mbt_ffi_free(mbt_ffi_load32(p0 + 4))
    1 => mbt_ffi_free(mbt_ffi_load32(p0 + 4))
    _ => panic()
  }
}

///|
pub fn wasmExportWriteEvents(p0 : Int, p1 : Int) -> Int {
  let array74 : Array[@types.GherkinEvent] = []
  for index75 = 0; index75 < p1; index75 = index75 + 1 {
    let iter_base = p0 + index75 * 88
    let lifted73 = match mbt_ffi_load8_u(iter_base + 0) {
      0 => @types.GherkinEvent::DocumentStart
      1 => @types.GherkinEvent::DocumentEnd
      2 => {
        let lifted : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let array : Array[@types.Tag] = []
        for index = 0; index < mbt_ffi_load32(iter_base + 20); index = index + 1 {
          let iter_base = mbt_ffi_load32(iter_base + 16) + index * 28
          let lifted0 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
            0 => Option::None
            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
            _ => panic()
          }
          let result = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 12),
            mbt_ffi_load32(iter_base + 16),
          )
          let result1 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 20),
            mbt_ffi_load32(iter_base + 24),
          )
          array.push(@types.Tag::{
            location: @types.Location::{
              line: mbt_ffi_load32(iter_base + 0),
              column: lifted0,
            },
            name: result,
            id: result1,
          })
        }
        mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
        let result2 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 24),
          mbt_ffi_load32(iter_base + 28),
        )
        let result3 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 32),
          mbt_ffi_load32(iter_base + 36),
        )
        let result4 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 40),
          mbt_ffi_load32(iter_base + 44),
        )
        let result5 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 48),
          mbt_ffi_load32(iter_base + 52),
        )
        @types.GherkinEvent::FeatureStart(@types.FeatureEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted,
          },
          tags: array,
          language: result2,
          keyword: result3,
          name: result4,
          description: result5,
        })
      }
      3 => @types.GherkinEvent::FeatureEnd
      4 => {
        let lifted6 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let array10 : Array[@types.Tag] = []
        for index11 = 0
            index11 < mbt_ffi_load32(iter_base + 20)
            index11 = index11 + 1 {
          let iter_base = mbt_ffi_load32(iter_base + 16) + index11 * 28
          let lifted7 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
            0 => Option::None
            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
            _ => panic()
          }
          let result8 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 12),
            mbt_ffi_load32(iter_base + 16),
          )
          let result9 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 20),
            mbt_ffi_load32(iter_base + 24),
          )
          array10.push(@types.Tag::{
            location: @types.Location::{
              line: mbt_ffi_load32(iter_base + 0),
              column: lifted7,
            },
            name: result8,
            id: result9,
          })
        }
        mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
        let result12 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 24),
          mbt_ffi_load32(iter_base + 28),
        )
        let result13 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 32),
          mbt_ffi_load32(iter_base + 36),
        )
        let result14 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 40),
          mbt_ffi_load32(iter_base + 44),
        )
        @types.GherkinEvent::RuleStart(@types.RuleEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted6,
          },
          tags: array10,
          keyword: result12,
          name: result13,
          description: result14,
        })
      }
      5 => @types.GherkinEvent::RuleEnd
      6 => {
        let lifted15 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let result16 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 16),
          mbt_ffi_load32(iter_base + 20),
        )
        let result17 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 24),
          mbt_ffi_load32(iter_base + 28),
        )
        let result18 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 32),
          mbt_ffi_load32(iter_base + 36),
        )
        @types.GherkinEvent::BackgroundStart(@types.BackgroundEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted15,
          },
          keyword: result16,
          name: result17,
          description: result18,
        })
      }
      7 => @types.GherkinEvent::BackgroundEnd
      8 => {
        let lifted19 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let array23 : Array[@types.Tag] = []
        for index24 = 0
            index24 < mbt_ffi_load32(iter_base + 20)
            index24 = index24 + 1 {
          let iter_base = mbt_ffi_load32(iter_base + 16) + index24 * 28
          let lifted20 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
            0 => Option::None
            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
            _ => panic()
          }
          let result21 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 12),
            mbt_ffi_load32(iter_base + 16),
          )
          let result22 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 20),
            mbt_ffi_load32(iter_base + 24),
          )
          array23.push(@types.Tag::{
            location: @types.Location::{
              line: mbt_ffi_load32(iter_base + 0),
              column: lifted20,
            },
            name: result21,
            id: result22,
          })
        }
        mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
        let result25 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 28),
          mbt_ffi_load32(iter_base + 32),
        )
        let result26 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 36),
          mbt_ffi_load32(iter_base + 40),
        )
        let result27 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 44),
          mbt_ffi_load32(iter_base + 48),
        )
        @types.GherkinEvent::ScenarioStart(@types.ScenarioEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted19,
          },
          tags: array23,
          kind: @types.ScenarioKind::from(mbt_ffi_load8_u(iter_base + 24)),
          keyword: result25,
          name: result26,
          description: result27,
        })
      }
      9 => @types.GherkinEvent::ScenarioEnd
      10 => {
        let lifted28 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let result29 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 16),
          mbt_ffi_load32(iter_base + 20),
        )
        let result30 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 28),
          mbt_ffi_load32(iter_base + 32),
        )
        @types.GherkinEvent::Step(@types.StepEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted28,
          },
          keyword: result29,
          keyword_type: @types.KeywordType::from(
            mbt_ffi_load8_u(iter_base + 24),
          ),
          text: result30,
        })
      }
      11 => {
        let lifted31 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let lifted33 : String? = match mbt_ffi_load8_u(iter_base + 16) {
          0 => Option::None
          1 => {
            let result32 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 20),
              mbt_ffi_load32(iter_base + 24),
            )
            Option::Some(result32)
          }
          _ => panic()
        }
        let result34 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 28),
          mbt_ffi_load32(iter_base + 32),
        )
        let result35 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 36),
          mbt_ffi_load32(iter_base + 40),
        )
        @types.GherkinEvent::DocString(@types.DocStringEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted31,
          },
          media_type: lifted33,
          content: result34,
          delimiter: result35,
        })
      }
      12 => {
        let lifted36 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let array43 : Array[@types.TableRow] = []
        for index44 = 0
            index44 < mbt_ffi_load32(iter_base + 20)
            index44 = index44 + 1 {
          let iter_base = mbt_ffi_load32(iter_base + 16) + index44 * 28
          let lifted37 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
            0 => Option::None
            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
            _ => panic()
          }
          let result38 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 12),
            mbt_ffi_load32(iter_base + 16),
          )
          let array41 : Array[@types.TableCell] = []
          for index42 = 0
              index42 < mbt_ffi_load32(iter_base + 24)
              index42 = index42 + 1 {
            let iter_base = mbt_ffi_load32(iter_base + 20) + index42 * 20
            let lifted39 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
              0 => Option::None
              1 => Option::Some(mbt_ffi_load32(iter_base + 8))
              _ => panic()
            }
            let result40 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 12),
              mbt_ffi_load32(iter_base + 16),
            )
            array41.push(@types.TableCell::{
              location: @types.Location::{
                line: mbt_ffi_load32(iter_base + 0),
                column: lifted39,
              },
              value: result40,
            })
          }
          mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
          array43.push(@types.TableRow::{
            location: @types.Location::{
              line: mbt_ffi_load32(iter_base + 0),
              column: lifted37,
            },
            id: result38,
            cells: array41,
          })
        }
        mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
        @types.GherkinEvent::DataTable(@types.DataTableEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted36,
          },
          rows: array43,
        })
      }
      13 => {
        let lifted45 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let array49 : Array[@types.Tag] = []
        for index50 = 0
            index50 < mbt_ffi_load32(iter_base + 20)
            index50 = index50 + 1 {
          let iter_base = mbt_ffi_load32(iter_base + 16) + index50 * 28
          let lifted46 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
            0 => Option::None
            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
            _ => panic()
          }
          let result47 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 12),
            mbt_ffi_load32(iter_base + 16),
          )
          let result48 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 20),
            mbt_ffi_load32(iter_base + 24),
          )
          array49.push(@types.Tag::{
            location: @types.Location::{
              line: mbt_ffi_load32(iter_base + 0),
              column: lifted46,
            },
            name: result47,
            id: result48,
          })
        }
        mbt_ffi_free(mbt_ffi_load32(iter_base + 16))
        let result51 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 24),
          mbt_ffi_load32(iter_base + 28),
        )
        let result52 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 32),
          mbt_ffi_load32(iter_base + 36),
        )
        let result53 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 40),
          mbt_ffi_load32(iter_base + 44),
        )
        let lifted60 : @types.TableRow? = match
          mbt_ffi_load8_u(iter_base + 48) {
          0 => Option::None
          1 => {
            let lifted54 : Int? = match mbt_ffi_load8_u(iter_base + 56) {
              0 => Option::None
              1 => Option::Some(mbt_ffi_load32(iter_base + 60))
              _ => panic()
            }
            let result55 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 64),
              mbt_ffi_load32(iter_base + 68),
            )
            let array58 : Array[@types.TableCell] = []
            for index59 = 0
                index59 < mbt_ffi_load32(iter_base + 76)
                index59 = index59 + 1 {
              let iter_base = mbt_ffi_load32(iter_base + 72) + index59 * 20
              let lifted56 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
                0 => Option::None
                1 => Option::Some(mbt_ffi_load32(iter_base + 8))
                _ => panic()
              }
              let result57 = mbt_ffi_ptr2str(
                mbt_ffi_load32(iter_base + 12),
                mbt_ffi_load32(iter_base + 16),
              )
              array58.push(@types.TableCell::{
                location: @types.Location::{
                  line: mbt_ffi_load32(iter_base + 0),
                  column: lifted56,
                },
                value: result57,
              })
            }
            mbt_ffi_free(mbt_ffi_load32(iter_base + 72))
            Option::Some(@types.TableRow::{
              location: @types.Location::{
                line: mbt_ffi_load32(iter_base + 52),
                column: lifted54,
              },
              id: result55,
              cells: array58,
            })
          }
          _ => panic()
        }
        let array67 : Array[@types.TableRow] = []
        for index68 = 0
            index68 < mbt_ffi_load32(iter_base + 84)
            index68 = index68 + 1 {
          let iter_base = mbt_ffi_load32(iter_base + 80) + index68 * 28
          let lifted61 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
            0 => Option::None
            1 => Option::Some(mbt_ffi_load32(iter_base + 8))
            _ => panic()
          }
          let result62 = mbt_ffi_ptr2str(
            mbt_ffi_load32(iter_base + 12),
            mbt_ffi_load32(iter_base + 16),
          )
          let array65 : Array[@types.TableCell] = []
          for index66 = 0
              index66 < mbt_ffi_load32(iter_base + 24)
              index66 = index66 + 1 {
            let iter_base = mbt_ffi_load32(iter_base + 20) + index66 * 20
            let lifted63 : Int? = match mbt_ffi_load8_u(iter_base + 4) {
              0 => Option::None
              1 => Option::Some(mbt_ffi_load32(iter_base + 8))
              _ => panic()
            }
            let result64 = mbt_ffi_ptr2str(
              mbt_ffi_load32(iter_base + 12),
              mbt_ffi_load32(iter_base + 16),
            )
            array65.push(@types.TableCell::{
              location: @types.Location::{
                line: mbt_ffi_load32(iter_base + 0),
                column: lifted63,
              },
              value: result64,
            })
          }
          mbt_ffi_free(mbt_ffi_load32(iter_base + 20))
          array67.push(@types.TableRow::{
            location: @types.Location::{
              line: mbt_ffi_load32(iter_base + 0),
              column: lifted61,
            },
            id: result62,
            cells: array65,
          })
        }
        mbt_ffi_free(mbt_ffi_load32(iter_base + 80))
        @types.GherkinEvent::Examples(@types.ExamplesEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted45,
          },
          tags: array49,
          keyword: result51,
          name: result52,
          description: result53,
          table_header: lifted60,
          table_body: array67,
        })
      }
      14 => {
        let lifted69 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let result70 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 16),
          mbt_ffi_load32(iter_base + 20),
        )
        @types.GherkinEvent::Tag(@types.TagEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted69,
          },
          name: result70,
        })
      }
      15 => {
        let lifted71 : Int? = match mbt_ffi_load8_u(iter_base + 8) {
          0 => Option::None
          1 => Option::Some(mbt_ffi_load32(iter_base + 12))
          _ => panic()
        }
        let result72 = mbt_ffi_ptr2str(
          mbt_ffi_load32(iter_base + 16),
          mbt_ffi_load32(iter_base + 20),
        )
        @types.GherkinEvent::Comment(@types.CommentEvent::{
          location: @types.Location::{
            line: mbt_ffi_load32(iter_base + 4),
            column: lifted71,
          },
          text: result72,
        })
      }
      _ => panic()
    }
    array74.push(lifted73)
  }
  mbt_ffi_free(p0)
  let result76 : Result[String, String] = @writer.write_events(array74)
  match result76 {
    Ok(payload) => {
      mbt_ffi_store8(return_area + 0, 0)
      let ptr = mbt_ffi_str2ptr(payload)
      mbt_ffi_store32(return_area + 8, payload.length())
      mbt_ffi_store32(return_area + 4, ptr)
      ()
    }
    Err(payload77) => {
      mbt_ffi_store8(return_area + 0, 1)
      let ptr78 = mbt_ffi_str2ptr(payload77)
      mbt_ffi_store32(return_area + 8, payload77.length())
      mbt_ffi_store32(return_area + 4, ptr78)
      ()
    }
  }
  return return_area
}

///|
pub fn wasmExportWriteEventsPostReturn(p0 : Int) -> Unit {
  match mbt_ffi_load8_u(p0 + 0) {
    0 => mbt_ffi_free(mbt_ffi_load32(p0 + 4))
    1 => mbt_ffi_free(mbt_ffi_load32(p0 + 4))
    _ => panic()
  }
}
